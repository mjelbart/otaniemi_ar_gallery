<html>
  <head>
    <meta charset="utf-8" />
    <title>AR Gallery</title>
    <meta
      name="description"
      content="An AR Gallery"
    />

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    
    <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script>

    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-extras@3.3.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>

    <!-- AR scripts -->

    <script>
      if (
        window.location.protocol == "http:" &&
        window.location.hostname != "localhost" &&
        window.location.hostname != "127.0.0.1" &&
        window.location.hostname != "[::1]"
      ) {
        window.location = window.location.href.replace("http:", "https:");
      }
    </script>

    <script>
      AFRAME.registerComponent("hide-in-ar-mode", {
        init: function() {
          this.el.sceneEl.addEventListener("enter-vr", ev => {
            this.wasVisible = this.el.getAttribute("visible");
            if (this.el.sceneEl.is("ar-mode")) {
              this.el.setAttribute("visible", false);
            }
          });
          this.el.sceneEl.addEventListener("exit-vr", ev => {
            if (this.wasVisible) this.el.setAttribute("visible", true);
          });
        }
      });
      AFRAME.registerComponent("ar-shadows", {
        schema: { opacity: { default: 0.3 } },
        init: function() {
          this.el.sceneEl.addEventListener("enter-vr", ev => {
            this.wasVisible = this.el.getAttribute("visible");
            if (this.el.sceneEl.is("ar-mode")) {
              this.savedMaterial = this.el.object3D.children[0].material;
              this.el.object3D.children[0].material = new THREE.ShadowMaterial();
              this.el.object3D.children[0].material.opacity = this.data.opacity;
              this.el.setAttribute("visible", true);
            }
          });
          this.el.sceneEl.addEventListener("exit-vr", ev => {
            if (this.savedMaterial) {
              this.el.object3D.children[0].material = this.savedMaterial;
              this.savedMaterial = null;
            }
            if (!this.wasVisible) this.el.setAttribute("visible", false);
          });
        }
      });
    </script>

  </head>

  <body>
    <a-scene
    >
      <a-assets>
        <img
          id="grid"
          src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png"
          crossorigin="anonymous"
        />

        
        
        
        <!-- PAINTINGS -->
        <img
          id="rainbow-tree"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Frainbow-tree.jpg"
          crossorigin="anonymous"
        />

        <img
          id="bananas"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fbananas.jpg"
          crossorigin="anonymous"
        />

        <img
          id="thumb"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fthumb.jpg"
          crossorigin="anonymous"
        />

        <img
          id="blackyellow"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fblack-n-yellow.jpg"
          crossorigin="anonymous"
        />

        <img
          id="monk"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fmonk.jpg"
          crossorigin="anonymous"
        />

        <img
          id="appleface"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fapple-face.jpg"
          crossorigin="anonymous"
        />

        <img
          id="snowice"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fsnow-ice.jpg"
          crossorigin="anonymous"
        />

        <img
          id="pinecone"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fpinecone.jpg"
          crossorigin="anonymous"
        />

        <img
          id="beardbird"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fbeard-bird.jpg"
          crossorigin="anonymous"
        />
        
        <!-- END OF PAINTINGS SECTION -->

        
        
        <img
          id="sky"
          src="https://img.gs/bbdkhfbzkk/2048x2048,stretch/http://i.imgur.com/WqlqEkq.jpg"
          crossorigin="anonymous"
        />

        <a-asset-item
          id="rock"
          src="https://cdn.glitch.com/a25c73b8-5213-4a83-8d22-fb99eb1be48d%2Frock.glb"
          crossorigin="anonymous"
        ></a-asset-item>

        <a-asset-item
          id="jar2"
          src="https://cdn.glitch.com/a25c73b8-5213-4a83-8d22-fb99eb1be48d%2Fjar_by_google-from-poly-cDR6hzfYrcp-(modified)v02.glb"
          crossorigin="anonymous"
        ></a-asset-item>

        <a-asset-item
          id="heart"
          src="https://cdn.glitch.com/a25c73b8-5213-4a83-8d22-fb99eb1be48d%2Fheart_by_jelz_02.glb"
          crossorigin="anonymous"
        ></a-asset-item>

        <a-asset-item
          id="gtlfavatar"
          src="https://cdn.glitch.com/8f8913e8-cc3e-4b08-8a35-d4861e7a8593%2Fpaint3dbigcatcoloured.glb"
        ></a-asset-item>

        <a-asset-item
          id="title_asset"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2FTitle.obj"
        ></a-asset-item>

        <a-asset-item
          id="houseplanty"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2FHouseplant_by_GooglePoly.glb"
        ></a-asset-item>

        <a-asset-item
          id="handwave"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fwave03.obj"
        ></a-asset-item>
        <!-- previous: https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fwave02.obj -->

        <a-asset-item
          id="gallerytest"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fgallery%20test3.glb"
        ></a-asset-item>

        <a-asset-item
          id="sculpt01"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fsculpt01.glb"
        ></a-asset-item>

        <a-asset-item
          id="stump-asset"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fstump01.glb"
        ></a-asset-item>

        <a-asset-item
          id="stumpobj-asset"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fstump.obj"
        ></a-asset-item>


        <a-asset-item
          id="poster-asset"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fposter01.glb"
        ></a-asset-item>

        <a-asset-item
          id="frame01"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fframe_bevelled_0.386x0.3x0.0139.obj"
        ></a-asset-item>

        <a-asset-item
          id="welcome-board"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fround-bottom-board.obj"
        ></a-asset-item>
        
        <a-asset-item
          id="headShape01"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Fhead01.obj"
        ></a-asset-item>
        
        <a-asset-item
          id="rockstack-asset"
          src="https://cdn.glitch.com/e7854d71-f0ce-4b9f-a894-6d103ccc93b2%2Frockstack_scanned01_38kTris_4x2kJPGTextures.glb"
        ></a-asset-item>
        
        


        <!-- Templates -->


        <!-- Mixins -->

        <a-mixin
          id="painting_type-a"
          geometry="primitive:box;width:0.01;height:0.25;depth:0.25;"
          material="color: #228911"
        ></a-mixin>

        <a-mixin
          id="painting_type-b"
          geometry="primitive:box;width:0.01;height:0.25;depth:0.25;"
        ></a-mixin>

        <a-mixin
          id="border_type-a"
          geometry="primitive: torus; radiusTubular: 0.02; segmentsRadial: 4; segmentsTubular: 4; radius:  0.26"
          rotation="0 90 45"
          material="color: #954911"
          scale="0.728 0.728 0.728"
        ></a-mixin>

        <a-mixin
          id="heart_mixin"
          gltf-model="#heart"
          position="-0.18 1.64 -1.495"
          scale="0.02 0.02 0.02"
          dynamic-body="shape:  sphere"
        ></a-mixin>

        <a-mixin
          id="mbox"
          geometry="primitive:box;
                          width:0.1;
                          height:0.1;
                          depth:0.1;"
        ></a-mixin>

        <a-mixin
                 id="m-frame01"
                 obj-model="obj: #frame01"
                 rotation="0 90 0"
                 position="0 0 -0.009"
                 scale="1.2 1.2 1.2"></a-mixin>

        <a-mixin
                 id="m-frame01h"
                 obj-model="obj: #frame01"
                 rotation="90 90 0"
                 position="0 0 -0.009"
                 scale="1.2 1.2 1.2"></a-mixin>

        <!-- /Mixins -->

        <!-- Images -->

        <img
          id="pic001_smilingApple"
          src="https://raw.githubusercontent.com/mjelbart/otaniemi_ar_gallery/master/images/apple_with_smiley_face.jpg"
             crossorigin="anonymous"
        />



        <!-- / Images -->


      </a-assets>
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->
      <!-- / END OF ASSETS -->


      <!-- The following entity should encapsulate most scene elements except the player. -->
      <!-- Normal camera height is 1.6 metres but enter AR seems to be setting the camera to 1.2 metres high. -->
      <a-entity position="0 -0.2 0">
        
        <a-entity
          id="debugging01"
          text="color: #000000; width: 0.71; value: 0 12 0; wrapCount: 16.89"
          position="-0.196 2 -1.51"
          rotation="0 0 0"
                  visible="false"
        ></a-entity>
        
        <a-entity
          id="stump"
          obj-model="obj: #stumpobj-asset"
          position="-1.20777 0.3 0.83449"
          rotation="0 90 0"
          scale="1 1 1"
                  material="color:	#6B8E23"
        ></a-entity>
        
        
        
        

        <a-entity id="zigzag-group" rotation="0 10 0"
        position="0.3854 0 0.2676">
        <a-entity
          id="item001"
          position="0.55037 1.47 -1.62726"
          rotation="0 -38.542 0"
        >
          <a-image
            geometry="width: 0.302"
            src="#rainbow-tree"
            width="0.3024"
            height="0.384"
          ></a-image>
          <a-entity mixin="m-frame01"></a-entity>
        </a-entity>

        <a-entity
          id="item003"
          position="0.68923 1.47 -1.34"
          rotation="0 -90 0"
        >
          <a-image src="#thumb" width="0.3024" height="0.4032"></a-image>
          <a-entity mixin="m-frame01"></a-entity>
        </a-entity>

        <a-entity
          id="item006"
          position="0.82894 1.47 -1.04935"
          rotation="0 -38.542 0"
        >
          <a-image src="#appleface" width="0.3024" height="0.4032"></a-image>
          <a-entity mixin="m-frame01"></a-entity>

        </a-entity>
        </a-entity>





        <a-entity
          id="item002"
          position="0.99739 1.4 -0.72159"
          rotation="0 90 0"
          visible="false"
        >
          <a-image src="#bananas" width="0.392" height="0.2738"></a-image>
          <a-entity mixin="m-frame01"></a-entity>
        </a-entity>




        <a-entity
          id="item004" visible="false"
          position="0.99313 1.36914 0.70649"
          rotation="0 59.29883996485969 0"
        >
          <a-image src="#blackyellow" width="0.3024" height="0.4032"></a-image>
          <a-entity mixin="m-frame01"></a-entity>
        </a-entity>
        <a-entity
          id="item005" scale="1.3 1.3 1.3"
          position="-1.49371 1.72399 -0.29756"
          rotation="0 90 0"
        >
          <a-image src="#monk" width="0.4032" height="0.3024"></a-image>
          
          <a-entity mixin="m-frame01h"></a-entity>
        </a-entity>



        <a-entity
          id="item007"
          position="0.4173 1.25585 1.19711"
          rotation="0 180 0"
        >
          <a-image src="#snowice" width="0.3024" height="0.3934"></a-image>
          <a-entity mixin="m-frame01"></a-entity>
        </a-entity>
        <a-entity
          id="item008"
          position="-0.44495 1.23375 1.38092"
          rotation="0 180 0"
        >
          <a-image src="#pinecone" width="0.4032" height="0.3024"></a-image>
          <a-entity mixin="m-frame01"></a-entity>
        </a-entity>

        <a-entity id="item009" scale="1.3 1.3 1.3" position="0 1.50865 1.49399" rotation="0 180 0">
          <a-image src="#beardbird" width="0.3024" height="0.4032"></a-image>
          <a-entity mixin="m-frame01"></a-entity>
        </a-entity>

        <!-- a-entity id="gallerytest01" gltf-model="#gallerytest" position="-0.0005 1.62779 -0.00602" rotation="0 -90 0" scale="1 1 1"></a-entity -->

        <!-- a-entity
          id="greeting"
          gltf-model="#poster-asset"
          position="-0.17831 1.62779 -1.44813"
          rotation="0 90 0"
          scale="3 3 3"
        ></a-entity -->

        <a-entity id="welcome-message-parent"
        position="-0.00027 0 -1.99011">
          <a-entity
          id="greeting"
          obj-model="obj: #welcome-board"
          position="-0.0005 1.62779 -0.006"
          rotation="0 90 0"
          scale="1 1 1"
        ></a-entity>


        <a-entity
          id="welcome_message01"
          text="color: #000000; width: 0.71; value: Name of the exhibition; wrapCount: 16.89; align:  center"
          position="0 2.00194 0"
          rotation="0 0 0"
        ></a-entity>

          
          
        <a-entity
          id="welcome_message02"
          text="color: #000000; width: 0.69; value: Designed by Top Hat Wombat; wrapCount: 30.2"
          position="0 1.77694 0"
          rotation="0 0 0"
        ></a-entity>
        </a-entity>

        <a-entity position="-0.74 0 -1.5" visible="false">
          <a-entity mixin="mbox" position="0 0.05 0"></a-entity>
          <a-entity mixin="mbox" position="0 0.25 0"></a-entity>
          <a-entity mixin="mbox" position="0 0.45 0"></a-entity>
          <a-entity mixin="mbox" position="0 0.65 0"></a-entity>
          <a-entity mixin="mbox" position="0 0.85 0"></a-entity>
          <a-entity mixin="mbox" position="0 1.05 0"></a-entity>
          <a-entity mixin="mbox" position="0 1.25 0"></a-entity>
          <a-entity mixin="mbox" position="0 1.45 0"></a-entity>
          <a-entity mixin="mbox" position="0 1.65 0"></a-entity>
          <a-entity mixin="mbox" position="0 1.85 0"></a-entity>
          <a-entity mixin="mbox" position="0 2.05 0"></a-entity>
        </a-entity>

        <a-entity id="floating_balls" position="-0.82801 0 -1.41616">
          <a-entity
            id="sphere01"
            geometry="primitive:sphere;
                              radius:0.1"
            position="0.136 1.778 0.024"
            material="color:pink"
            animation="property:position;
                               from:0.136 1.778 0.024;
                               to:0.136 1.978 0.024;
                               loop:true;
                               dir: alternate;
                               easing: easeInOutQuad;
                               dur: 8888;
                               "
            animation__color="property: components.material.material.color;
                                      type: color;
                                      to: red;
                                      loop:true;
                                      dur: 8888;
                                      dir: alternate;
                                      easing: easeInOutQuad"
            class="clickable"
          ></a-entity>

          <a-entity
            id="sphere02"
            geometry="primitive:sphere;
                              radius:0.1"
            position="-0.014 1.433 -0.17"
            material="color:orange"
            animation="property:position;
                               from:-0.014 1.433 -0.17;
                               to:-0.014 1.633 -0.17;
                               loop:true;
                               dir: alternate;
                               easing: easeInOutQuad;
                               dur: 9999;
                               "
            animation__color="property: components.material.material.color;
                                      type: color;
                                      to: pink;
                                      loop:true;
                                      dur: 9999;
                                      dir: alternate;
                                      easing: easeInOutQuad"
            class="clickable"
          ></a-entity>

          <a-entity
            id="sphere03"
            geometry="primitive:sphere;
                              radius:0.1"
            position="-0.119 1.638 0.054"
            material="color:green"
            animation="property:position;
                               from:-0.119 1.638 0.054;
                               to:-0.119 1.838 0.054;
                               loop:true;
                               dir: alternate;
                               easing: easeInOutQuad;
                               dur: 9454;
                               "
            animation__color="property: components.material.material.color;
                                      type: color;
                                      to: yellow;
                                      loop:true;
                                      dur: 9454;
                                      dir: alternate;
                                      easing: easeInOutQuad"
            class="clickable"
          ></a-entity>
        </a-entity>

        <a-entity
          id="pedestal"
          geometry="primitive:box;
                          width:0.3;
                          depth:0.3;
                          height:0.84;"
          position="1.12896 0.42 0.0039"
          material="color:#f2f3f4"
        >
        </a-entity>
        <a-entity id="sculpt-blob" gltf-model="#sculpt01" position="0.873 -0.156 -0.228"></a-entity>
        
        <a-entity
          id="rockstack"
          gltf-model="#rockstack-asset"
          position="1.124 0.869 0.015"
          rotation="0 155.434 0"
          scale="0.1 0.1 0.1"
          
        ></a-entity>

        <a-entity
          visible="false"
          id="title"
          obj-model="obj: #title_asset;"
          position="-0.640 1.599 -2.655"
          rotation="90 0 0"
          scale="0.4 0.4 0.4"
        ></a-entity>

        <!-- a-entity id="wave" obj-model="obj: #handwave;" material="color:#d51010" position="-0.4 1 -2.655" rotation="0 0 0" scale="1 1 1"
                animation="loop:true;property:rotation;from: 0 0 0; to: 0 0 -20; dur: 500; easing:linear; dir: alternate;"></a-entity -->

     
        <!-- a-entity id="jarbottom" static-body="sphereRadius: NaN" static-body geometry="width: 0.2; height: 0.01; depth: 0.2" position="-0.02066 -0.00547 -0.02189" ></a-entity -->

        <!--a-entity link="href: https://naf-shootertest.glitch.me; title: Room 2; image: #pic001_smilingApple;" position="-1 1.6 0"></a-entity -->
        <!-- a-link href="https://naf-shootertest.glitch.me" title="Room 2" position="-1 1.6 2.5"></a-link -->

        <a-plane
          height="15"
          width="15"
          position="0 0 -3"
          rotation="-90 0 0"
          shadow="receive: true"
          ar-shadows="opacity: 0.3"
          visible="false"
        ></a-plane>
      </a-entity>

      <!-- ######### ######### ######### CAMERA ######### ######### ######### -->
      <!-- ######### ######### ######### CAMERA ######### ######### ######### -->
      <!-- ######### ######### ######### CAMERA ######### ######### ######### -->

      <a-entity id="rig">
        <a-entity
          id="player"
          camera

          position="0 1.2 0"
          
             
          wasd-controls
          look-controls
                  >
          

          
          
        </a-entity>
        
        
          
        

      </a-entity>
      <!-- removed this line from player as entering AR mode centres you - spawn-in-circle="radius:3" -->

      <!-- a-entity
        environment="preset: forest; lighting: none; shadow: none; lightPosition: 0 2.15 0"
        hide-in-ar-mode
      ></a-entity -->
      <a-entity light="type: ambient; intensity: 0.5;"></a-entity
      ><a-light
        type="directional"
        light="castShadow: true; shadowMapHeight: 1024; shadowMapWidth: 1024; shadowCameraLeft: -7; shadowCameraRight: 5; shadowCameraBottom: -5; shadowCameraTop: 5;"
        id="light"
        position="-1.572 3.000 1.500"
      ></a-light>
      <!-- The follwing shadow-receiving plane is only visible in AR mode. -->
      
      
    </a-scene>

    <!-- ######### ######### ######### the end of the a-scene ######### ######### ######### -->
    <!-- ######### ######### ######### the end of the a-scene ######### ######### ######### -->
    <!-- ######### ######### ######### the end of the a-scene ######### ######### ######### -->
    <!-- ######### ######### ######### the end of the a-scene ######### ######### ######### -->

   
    </body>
</html>
