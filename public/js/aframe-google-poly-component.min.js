AFRAME.registerSystem("google-poly",{schema:{api_key:{type:"string"}},loadAsset:function(e,t){const o=this.data.api_key;var n=`https://poly.googleapis.com/v1/assets/${e}/?key=${o}`,s=new XMLHttpRequest;s.open("GET",n,!0),s.addEventListener("load",function(e){var o=JSON.parse(e.target.response),n=function(e){var t=o.formats.find(t=>t.formatType===e);return t},s=function(e){var o=e.root,n=e.resources.find(e=>e.url.endsWith("mtl")),s=o.url.slice(0,o.url.indexOf(o.relativePath)),r=new THREE.MTLLoader;r.setCrossOrigin(!0),r.setMaterialOptions({ignoreZeroRGBs:!0}),r.setTexturePath(s),r.load(n.url,function(e){var n=new THREE.OBJLoader;n.setMaterials(e),n.load(o.url,function(e){var o=new THREE.Box3;o.setFromObject(e);var n=o.getCenter();n.y=o.min.y,e.position.sub(n);var s=new THREE.Group;s.add(e),t.setObject3D("asset",s)})})},r=function(e){var o=e.root,n=new THREE.GLTFLoader;n.setCrossOrigin(!0),n.load(o.url,function(e){var o=new THREE.Box3;o.setFromObject(e.scene);var n=o.getCenter();n.y=o.min.y,e.scene.position.sub(n),t.setObject3D("mesh",e.scene)},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.error(e)})};if(null==n("GLTF2"))if(console.warn("Cannot load model as GLTF. Attempting to load OBJ"),null==n("OBJ"))console.error("Only GLTF and OBJ are supported at this time");else{var a=n("OBJ");s(a)}else{a=n("GLTF2");r(a)}}),s.send(null)},init:function(){}}),AFRAME.registerComponent("google-poly",{schema:{src:{type:"string",default:"5vbJ5vildOq"}},init:function(){var e=this.el,t=this.data,o=this.system;o.loadAsset(t.src,e)}}),AFRAME.registerPrimitive("a-google-poly",{defaultComponents:{position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},"g-poly":{}},mappings:{src:"google-poly.src"}});